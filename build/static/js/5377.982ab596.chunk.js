"use strict";(self.webpackChunkastroscore=self.webpackChunkastroscore||[]).push([[5377],{18456:function(e,r,n){n.d(r,{Z:function(){return f}});var t=n(1413),i=n(45987),a=n(64554),o=n(20890),s=n(23060),c=n(43504),l=n(93517),u=n(80184),d=["links","activeLast"];function p(e){var r=e.links,n=e.activeLast,s=void 0!==n&&n,c=(0,i.Z)(e,d),p=r[r.length-1].name,h=r.map((function(e){return(0,u.jsx)(m,{link:e},e.name)})),f=r.map((function(e){return(0,u.jsx)("div",{children:e.name!==p?(0,u.jsx)(m,{link:e}):(0,u.jsx)(o.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:p})},e.name)}));return(0,u.jsx)(l.Z,(0,t.Z)((0,t.Z)({separator:(0,u.jsx)(a.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},c),{},{children:s?h:f}))}function m(e){var r=e.link,n=r.href,t=r.name,i=r.icon;return(0,u.jsxs)(s.Z,{variant:"body2",component:c.rU,to:n||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[i&&(0,u.jsx)(a.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:i}),t]},t)}var h=["links","action","heading","moreLink","sx"];function f(e){var r=e.links,n=e.action,c=e.heading,l=e.moreLink,d=void 0===l?[]:l,m=e.sx,f=(0,i.Z)(e,h);return(0,u.jsxs)(a.Z,{sx:(0,t.Z)({mb:5},m),children:[(0,u.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)(a.Z,{sx:{flexGrow:1},children:[(0,u.jsx)(o.Z,{variant:"h4",gutterBottom:!0,children:c}),(0,u.jsx)(p,(0,t.Z)({links:r},f))]}),n&&(0,u.jsx)(a.Z,{sx:{flexShrink:0},children:n})]}),(0,u.jsx)(a.Z,{sx:{mt:2},children:"string"===typeof d?(0,u.jsx)(s.Z,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map((function(e){return(0,u.jsx)(s.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},95377:function(e,r,n){n.r(r),n.d(r,{default:function(){return U}});var t=n(72791),i=n(53305),a=n(16871),o=n(26445),s=n(20647),c=n(18829),l=n(38072),u=n(85703),d=n(25212),p=n(18456),m=n(93433),h=n(15861),f=n(1413),g=n(64687),x=n.n(g),v=n(62797),Z=n(98246),b=n(61134),j=n(61265),y=n(47630),k=n(39709),S=n(20890),w=n(61889),C=n(57621),I=n(53767),P=n(63466),R=n(65390),B=n(89731),L=n(77103),T=n(80184),M=[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Kids",value:"Kids"}],N=[{group:"Clothing",classify:["Shirts","T-shirts","Jeans","Leather"]},{group:"Tailored",classify:["Suits","Blazers","Trousers","Waistcoats"]},{group:"Accessories",classify:["Shoes","Backpacks and bags","Bracelets","Face masks"]}],A=["Toy Story 3","Logan","Full Metal Jacket","Dangal","The Sting","2001: A Space Odyssey","Singin' in the Rain","Toy Story","Bicycle Thieves","The Kid","Inglourious Basterds","Snatch","3 Idiots"],z=(0,y.ZP)(S.Z)((function(e){var r=e.theme;return(0,f.Z)((0,f.Z)({},r.typography.subtitle2),{},{color:r.palette.text.secondary,marginBottom:r.spacing(1)})}));function E(e){var r=e.isEdit,n=e.currentProduct,i=(0,a.s0)(),o=(0,t.useRef)([]),s=(0,Z.Ds)().enqueueSnackbar,c=v.Ry().shape({title:v.Z_().required("Name is required"),description:v.Z_().required("Description is required"),images:v.IX().min(1,"Images is required"),price:v.Rx().moreThan(0,"Price should not be $0.00")}),u=(0,t.useMemo)((function(){return{title:(null===n||void 0===n?void 0:n.title)||"",description:(null===n||void 0===n?void 0:n.description)||"",productImages:(null===n||void 0===n?void 0:n.productImages)||[],images:(null===n||void 0===n?void 0:n.images)||[],code:(null===n||void 0===n?void 0:n.code)||"",sku:(null===n||void 0===n?void 0:n.sku)||"",price:(null===n||void 0===n?void 0:n.price)||0,priceSale:(null===n||void 0===n?void 0:n.priceSale)||0,tags:(null===n||void 0===n?void 0:n.tags)||[A[0]],inStock:!0,taxes:!0,gender:(null===n||void 0===n?void 0:n.gender)||M[2].value,category:(null===n||void 0===n?void 0:n.category)||N[0].classify[1]}}),[n]),d=(0,b.cI)({resolver:(0,j.X)(c),defaultValues:u}),p=d.reset,f=d.watch,g=(d.control,d.setValue),y=d.getValues,S=d.handleSubmit,E=d.formState.isSubmitting,U=f();(0,t.useEffect)((function(){r&&n&&p(u),r||p(u)}),[r,n]);var D=function(){var e=(0,h.Z)(x().mark((function e(t){var a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.images.length===o.current.length?t.productImages=o.current:(t.productImages=o.current.filter((function(e){return t.images.some((function(r){return e.file.name===r.name&&e.file.size===r.size}))})),t.productImages.length>t.images.length&&(t.productImages=t.productImages.slice(0,t.images.length))),console.log("data",t),t.id=null===n||void 0===n?void 0:n.id,!(a=localStorage.getItem("accessToken"))||!(0,L.w)(a)){e.next=10;break}return(0,L.K)(a),e.next=9,B.Z.post("/products",t);case 9:e.sent;case 10:s(r?"Update success!":"Create success!"),i(l.vB.eCommerce.list),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(r){return e.apply(this,arguments)}}(),O=(0,t.useCallback)((function(e){var r=U.images||[];e.forEach(function(){var e=(0,h.Z)(x().mark((function e(r){var n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var t=new FileReader;t.onload=function(){return e({file:r,base64String:t.result.split(",")[1]})},t.onerror=n,t.readAsDataURL(r)}));case 2:n=e.sent,o.current=[].concat((0,m.Z)(o.current),[n]);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),g("images",[].concat((0,m.Z)(r),(0,m.Z)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))))}),[g,U.images,o.current]);return(0,T.jsx)(R.RV,{methods:d,onSubmit:S(D),children:(0,T.jsxs)(w.ZP,{container:!0,spacing:3,children:[(0,T.jsx)(w.ZP,{item:!0,xs:12,md:8,children:(0,T.jsx)(C.Z,{sx:{p:3},children:(0,T.jsxs)(I.Z,{spacing:3,children:[(0,T.jsx)(R.au,{name:"title",label:"Product Name"}),(0,T.jsxs)("div",{children:[(0,T.jsx)(z,{children:"Description"}),(0,T.jsx)(R.LM,{simple:!0,name:"description"})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)(z,{children:"Images"}),(0,T.jsx)(R.fT,{showPreview:!0,name:"images",accept:"image/*",maxSize:3145728,onDrop:O,onRemove:function(e){var r,n=null===(r=U.images)||void 0===r?void 0:r.filter((function(r){return r!==e}));g("images",n),o.current=o.current.filter((function(r){return r.file!==e}))},onRemoveAll:function(){g("images",[]),o.current=[]},onUpload:function(){return console.log("ON UPLOAD")}})]})]})})}),(0,T.jsx)(w.ZP,{item:!0,xs:12,md:4,children:(0,T.jsxs)(I.Z,{spacing:3,children:[(0,T.jsxs)(C.Z,{sx:{p:3},children:[(0,T.jsx)(R._e,{name:"inStock",label:"In stock"}),(0,T.jsxs)(I.Z,{spacing:3,mt:2,children:[(0,T.jsx)(R.au,{name:"code",label:"Product Code"}),(0,T.jsx)(R.au,{name:"sku",label:"Product SKU"})]})]}),(0,T.jsxs)(C.Z,{sx:{p:3},children:[(0,T.jsxs)(I.Z,{spacing:3,mb:2,children:[(0,T.jsx)(R.au,{name:"price",label:"Regular Price",placeholder:"0.00",value:0===y("price")?"":y("price"),onChange:function(e){return g("price",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,T.jsx)(P.Z,{position:"start",children:"$"}),type:"number"}}),(0,T.jsx)(R.au,{name:"priceSale",label:"Sale Price",placeholder:"0.00",value:0===y("priceSale")?"":y("priceSale"),onChange:function(e){return g("priceSale",Number(e.target.value))},InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,T.jsx)(P.Z,{position:"start",children:"$"}),type:"number"}})]}),(0,T.jsx)(R._e,{name:"taxes",label:"Price includes taxes"})]}),(0,T.jsx)(k.Z,{type:"submit",variant:"contained",size:"large",loading:E,children:r?"Save Changes":"Create Product"})]})})]})})}function U(){var e=(0,u.Z)().themeStretch,r=(0,s.I0)(),n=(0,a.TH)().pathname,m=(0,a.UO)().name,h=(0,s.v9)((function(e){return e.product})).products,f=n.includes("edit"),g=h.find((function(e){return(0,i.o)(e.title)===m}));return(0,t.useEffect)((function(){r((0,c.Xp)())}),[r]),(0,T.jsx)(d.Z,{title:"Ecommerce: Create a new product",children:(0,T.jsxs)(o.Z,{maxWidth:!e&&"lg",children:[(0,T.jsx)(p.Z,{heading:f?"Edit product":"Create a new product",links:[{name:"Dashboard",href:l.vB.root},{name:"E-Commerce",href:l.vB.eCommerce.root},{name:f?m:"New product"}]}),(0,T.jsx)(E,{isEdit:f,currentProduct:g})]})})}},93517:function(e,r,n){n.d(r,{Z:function(){return B}});var t=n(93433),i=n(29439),a=n(4942),o=n(87462),s=n(63366),c=n(72791),l=(n(57441),n(28182)),u=n(90767),d=n(47630),p=n(93736),m=n(20890),h=n(12065),f=n(74223),g=n(80184),x=(0,f.Z)((0,g.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),v=n(95080),Z=(0,d.ZP)(v.Z)((function(e){var r=e.theme;return(0,o.Z)({display:"flex",marginLeft:"calc(".concat(r.spacing(1)," * 0.5)"),marginRight:"calc(".concat(r.spacing(1)," * 0.5)")},"light"===r.palette.mode?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===r.palette.mode?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:r.shadows[0]},"light"===r.palette.mode?{backgroundColor:(0,h._4)(r.palette.grey[200],.12)}:{backgroundColor:(0,h._4)(r.palette.grey[600],.12)})})})),b=(0,d.ZP)(x)({width:24,height:16});var j=function(e){var r=e;return(0,g.jsx)("li",{children:(0,g.jsx)(Z,(0,o.Z)({focusRipple:!0},e,{ownerState:r,children:(0,g.jsx)(b,{ownerState:r})}))})},y=n(95159);function k(e){return(0,y.Z)("MuiBreadcrumbs",e)}var S=(0,n(30208).Z)("MuiBreadcrumbs",["root","ol","li","separator"]),w=["children","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,d.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:function(e,r){return[(0,a.Z)({},"& .".concat(S.li),r.li),r.root]}})({}),I=(0,d.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:function(e,r){return r.ol}})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),P=(0,d.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:function(e,r){return r.separator}})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function R(e,r,n,t){return e.reduce((function(i,a,o){return o<e.length-1?i=i.concat(a,(0,g.jsx)(P,{"aria-hidden":!0,className:r,ownerState:t,children:n},"separator-".concat(o))):i.push(a),i}),[])}var B=c.forwardRef((function(e,r){var n=(0,p.Z)({props:e,name:"MuiBreadcrumbs"}),a=n.children,d=n.className,m=n.component,h=void 0===m?"nav":m,f=n.expandText,x=void 0===f?"Show path":f,v=n.itemsAfterCollapse,Z=void 0===v?1:v,b=n.itemsBeforeCollapse,y=void 0===b?1:b,S=n.maxItems,P=void 0===S?8:S,B=n.separator,L=void 0===B?"/":B,T=(0,s.Z)(n,w),M=c.useState(!1),N=(0,i.Z)(M,2),A=N[0],z=N[1],E=(0,o.Z)({},n,{component:h,expanded:A,expandText:x,itemsAfterCollapse:Z,itemsBeforeCollapse:y,maxItems:P,separator:L}),U=function(e){var r=e.classes;return(0,u.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},k,r)}(E),D=c.useRef(null),O=c.Children.toArray(a).filter((function(e){return c.isValidElement(e)})).map((function(e,r){return(0,g.jsx)("li",{className:U.li,children:e},"child-".concat(r))}));return(0,g.jsx)(C,(0,o.Z)({ref:r,component:h,color:"text.secondary",className:(0,l.Z)(U.root,d),ownerState:E},T,{children:(0,g.jsx)(I,{className:U.ol,ref:D,ownerState:E,children:R(A||P&&O.length<=P?O:function(e){return y+Z>=e.length?e:[].concat((0,t.Z)(e.slice(0,y)),[(0,g.jsx)(j,{"aria-label":x,onClick:function(){z(!0);var e=D.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis")],(0,t.Z)(e.slice(e.length-Z,e.length)))}(O),U.separator,L,E)})}))}))},53305:function(e,r,n){n.d(r,{o:function(){return a}});var t=n(3431),i=n(17254);function a(e,r){return void 0===r&&(r={}),function(e,r){return void 0===r&&(r={}),(0,i.B)(e,(0,t.pi)({delimiter:"."},r))}(e,(0,t.pi)({delimiter:"-"},r))}}}]);
//# sourceMappingURL=5377.982ab596.chunk.js.map