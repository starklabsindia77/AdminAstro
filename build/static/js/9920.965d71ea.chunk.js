"use strict";(self.webpackChunkastroscore=self.webpackChunkastroscore||[]).push([[9920],{18456:function(e,n,i){i.d(n,{Z:function(){return Z}});var r=i(1413),t=i(45987),s=i(64554),a=i(20890),l=i(23060),d=i(43504),o=i(93517),c=i(80184),h=["links","activeLast"];function u(e){var n=e.links,i=e.activeLast,l=void 0!==i&&i,d=(0,t.Z)(e,h),u=n[n.length-1].name,p=n.map((function(e){return(0,c.jsx)(x,{link:e},e.name)})),Z=n.map((function(e){return(0,c.jsx)("div",{children:e.name!==u?(0,c.jsx)(x,{link:e}):(0,c.jsx)(a.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:u})},e.name)}));return(0,c.jsx)(o.Z,(0,r.Z)((0,r.Z)({separator:(0,c.jsx)(s.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},d),{},{children:l?p:Z}))}function x(e){var n=e.link,i=n.href,r=n.name,t=n.icon;return(0,c.jsxs)(l.Z,{variant:"body2",component:d.rU,to:i||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,c.jsx)(s.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),r]},r)}var p=["links","action","heading","moreLink","sx"];function Z(e){var n=e.links,i=e.action,d=e.heading,o=e.moreLink,h=void 0===o?[]:o,x=e.sx,Z=(0,t.Z)(e,p);return(0,c.jsxs)(s.Z,{sx:(0,r.Z)({mb:5},x),children:[(0,c.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,c.jsxs)(s.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:d}),(0,c.jsx)(u,(0,r.Z)({links:n},Z))]}),i&&(0,c.jsx)(s.Z,{sx:{flexShrink:0},children:i})]}),(0,c.jsx)(s.Z,{sx:{mt:2},children:"string"===typeof h?(0,c.jsx)(l.Z,{href:h,target:"_blank",rel:"noopener",variant:"body2",children:h}):h.map((function(e){return(0,c.jsx)(l.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}},19920:function(e,n,i){i.r(n),i.d(n,{default:function(){return K}});var r=i(15861),t=i(29439),s=i(64687),a=i.n(s),l=i(16871),d=i(72791),o=i(26445),c=i(38072),h=i(85703),u=(i(23434),i(25212)),x=i(18456),p=i(1413),Z=i(62797),v=i(61134),j=i(24109),g=i(61265),f=i(39709),m=i(47630),b=i(13967),y=i(35855),w=i(57621),k=i(53767),S=i(94721),I=i(61889),_=i(20890),D=i(23786),C=i(27760),T=i(64554),q=i(39281),O=i(79836),W=i(56890),B=i(53994),E=i(53382),P=i(77353),L=i(53861),z=i(7870),F=(i(41758),i(5977),i(27578)),N=i(80184),R=(0,m.ZP)(y.Z)((function(e){var n=e.theme;return{"& td":{paddingTop:n.spacing(1),paddingBottom:n.spacing(1)}}})),U=["New Order","In Transit","Delivered","Cancelled"];function V(e){var n,i,s,o,c,h,u,x,m=e.isEdit,V=e.currentOrder,M=((0,l.s0)(),(0,L.Z)("up","md")),Q=((0,b.Z)(),(0,d.useState)(!1)),K=(0,t.Z)(Q,2),G=(K[0],K[1],(0,d.useState)(!1)),H=(0,t.Z)(G,2),X=(H[0],H[1],Z.Ry().shape({createDate:Z.Z_().nullable().required("Create date is required"),dueDate:Z.Z_().nullable().required("Due date is required"),shipping_info:Z.nK().nullable().required("Order to is required")})),A=(0,d.useMemo)((function(){return{orderId:(null===V||void 0===V?void 0:V.order_id)||"17099",createDate:(null===V||void 0===V?void 0:V.createDate)||null,dueDate:(null===V||void 0===V?void 0:V.dueDate)||null,shippingFee:(null===V||void 0===V?void 0:V.shipping_fee)||"",status:(null===V||void 0===V?void 0:V.status)||"draft",gst:(null===V||void 0===V?void 0:V.gst)||"",subTotal:(null===V||void 0===V?void 0:V.sub_total)||"",total:(null===V||void 0===V?void 0:V.total)||"",shippingInfo:(null===V||void 0===V?void 0:V.shipping_info)||{name:"",mobile_number:"",address:"",town:"",city:"",state:"",pincode:""},items:(null===V||void 0===V?void 0:V.cart_info)||[{title:"",description:"",service:"",quantity:0,price:0,total:0}]}}),[V]),J=(0,v.cI)({resolver:(0,g.X)(X),defaultValues:A}),Y=J.control,$=J.reset,ee=J.watch,ne=J.handleSubmit,ie=J.formState.isSubmitting,re=ee();(0,d.useEffect)((function(){m&&V&&$(A),m||$(A)}),[m,V]);(0,p.Z)((0,p.Z)({},re),{},{items:re.items.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{total:e.quantity*e.price})}))});var te=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("test update",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsx)(P.RV,{methods:J,onSubmit:ne(te),children:(0,N.jsxs)(w.Z,{children:[(0,N.jsx)(k.Z,{spacing:{xs:2,md:5},direction:{xs:"column",md:"row"},divider:(0,N.jsx)(S.Z,{flexItem:!0,orientation:M?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:(0,N.jsx)(I.ZP,{container:!0,children:(0,N.jsxs)(I.ZP,{item:!0,xs:12,sm:6,sx:{mb:5},children:[(0,N.jsx)(_.Z,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Order from"}),(0,N.jsx)(_.Z,{variant:"body2",children:null===(n=re.shippingInfo)||void 0===n?void 0:n.name}),(0,N.jsxs)(_.Z,{variant:"body2",children:[null===(i=re.shippingInfo)||void 0===i?void 0:i.address,", ",null===(s=re.shippingInfo)||void 0===s?void 0:s.town]}),(0,N.jsxs)(_.Z,{variant:"body2",children:[null===(o=re.shippingInfo)||void 0===o?void 0:o.city,", ",null===(c=re.shippingInfo)||void 0===c?void 0:c.state," - ",null===(h=re.shippingInfo)||void 0===h?void 0:h.pincode]}),(0,N.jsxs)(_.Z,{variant:"body2",children:["Phone: ",null===(u=re.shippingInfo)||void 0===u?void 0:u.mobile_number]})]})})}),(0,N.jsxs)(k.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,bgcolor:"background.neutral"},children:[(0,N.jsx)(P.au,{disabled:!0,name:"orderNumber",label:"Order number",value:"INV-".concat(re.orderId)}),(0,N.jsx)(P.Cc,{fullWidth:!0,name:"status",label:"Status",InputLabelProps:{shrink:!0},SelectProps:{native:!1,sx:{textTransform:"capitalize"}},children:U.map((function(e){return(0,N.jsx)(D.Z,{value:e,sx:{mx:1,my:.5,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:e},e)}))}),(0,N.jsx)(v.Qr,{name:"createDate",control:Y,render:function(e){var n=e.field,i=e.fieldState.error;return(0,N.jsx)(j.M,{label:"Date create",value:n.value,onChange:function(e){n.onChange(e)},renderInput:function(e){return(0,N.jsx)(C.Z,(0,p.Z)((0,p.Z)({},e),{},{disabled:!0,fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}))}})}}),(0,N.jsx)(v.Qr,{name:"dueDate",control:Y,render:function(e){var n=e.field,i=e.fieldState.error;return(0,N.jsx)(j.M,{label:"Due date",value:n.value,onChange:function(e){n.onChange(e)},renderInput:function(e){return(0,N.jsx)(C.Z,(0,p.Z)((0,p.Z)({},e),{},{fullWidth:!0,error:!!i,helperText:null===i||void 0===i?void 0:i.message}))}})}})]}),(0,N.jsxs)(T.Z,{sx:{p:3},children:[(0,N.jsx)(_.Z,{variant:"h6",sx:{color:"text.disabled",mb:3},children:"Details:"}),(0,N.jsx)(F.Z,{children:(0,N.jsx)(q.Z,{sx:{minWidth:860},children:(0,N.jsxs)(O.Z,{children:[(0,N.jsx)(W.Z,{sx:{borderBottom:function(e){return"solid 1px ".concat(e.palette.divider)},"& th":{backgroundColor:"transparent"}},children:(0,N.jsxs)(y.Z,{children:[(0,N.jsx)(B.Z,{width:40,children:"#"}),(0,N.jsx)(B.Z,{align:"left",children:"Description"}),(0,N.jsx)(B.Z,{align:"left",children:"Qty"}),(0,N.jsx)(B.Z,{align:"right",children:"Unit price"}),(0,N.jsx)(B.Z,{align:"right",children:"Total"})]})}),(0,N.jsxs)(E.Z,{children:[null===(x=re.items)||void 0===x?void 0:x.map((function(e,n){return(0,N.jsxs)(y.Z,{sx:{borderBottom:function(e){return"solid 1px ".concat(e.palette.divider)}},children:[(0,N.jsx)(B.Z,{children:n+1}),(0,N.jsx)(B.Z,{align:"left",children:(0,N.jsx)(T.Z,{sx:{maxWidth:560},children:(0,N.jsx)(_.Z,{variant:"subtitle2",children:e.title})})}),(0,N.jsx)(B.Z,{align:"left",children:e.quantity}),(0,N.jsx)(B.Z,{align:"right",children:"\u20b9 ".concat((0,z.e_)(e.price))}),(0,N.jsx)(B.Z,{align:"right",children:"\u20b9 ".concat((0,z.e_)(e.price*e.quantity))})]},n)})),(0,N.jsxs)(R,{children:[(0,N.jsx)(B.Z,{colSpan:3}),(0,N.jsxs)(B.Z,{align:"right",children:[(0,N.jsx)(T.Z,{sx:{mt:2}}),(0,N.jsx)(_.Z,{children:"Subtotal"})]}),(0,N.jsxs)(B.Z,{align:"right",width:120,children:[(0,N.jsx)(T.Z,{sx:{mt:2}}),(0,N.jsx)(_.Z,{children:"\u20b9 ".concat((0,z.e_)(re.subTotal))})]})]}),(0,N.jsxs)(R,{children:[(0,N.jsx)(B.Z,{colSpan:3}),(0,N.jsx)(B.Z,{align:"right",children:(0,N.jsx)(_.Z,{children:"Shipping Fees"})}),(0,N.jsx)(B.Z,{align:"right",width:120,children:(0,N.jsx)(_.Z,{children:re.shippingFee&&"\u20b9 ".concat((0,z.e_)(+re.shippingFee))})})]}),(0,N.jsxs)(R,{children:[(0,N.jsx)(B.Z,{colSpan:3}),(0,N.jsx)(B.Z,{align:"right",children:(0,N.jsx)(_.Z,{children:"Taxes"})}),(0,N.jsx)(B.Z,{align:"right",width:120,children:(0,N.jsx)(_.Z,{children:re.gst&&"\u20b9 ".concat((0,z.e_)(re.gst))})})]}),(0,N.jsxs)(R,{children:[(0,N.jsx)(B.Z,{colSpan:3}),(0,N.jsx)(B.Z,{align:"right",children:(0,N.jsx)(_.Z,{variant:"h6",children:"Total"})}),(0,N.jsx)(B.Z,{align:"right",width:140,children:(0,N.jsx)(_.Z,{variant:"h6",children:"\u20b9 ".concat((0,z.e_)(re.total))})})]})]})]})})})]}),(0,N.jsx)(k.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mb:5,mr:5},children:(0,N.jsx)(f.Z,{type:"submit",size:"large",variant:"contained",loading:ie,children:m?"Update":"Create"})})]})})}var M=i(89731),Q=i(77103);function K(){var e=(0,h.Z)().themeStretch,n=(0,l.UO)().id,i=(0,d.useState)({}),s=(0,t.Z)(i,2),p=s[0],Z=s[1],v=localStorage.getItem("accessToken");return(0,d.useEffect)((0,r.Z)(a().mark((function e(){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v||!(0,Q.w)(v)){e.next=7;break}return(0,Q.K)(v),e.next=4,M.Z.get("/orders/".concat(n));case 4:i=e.sent,r=i.data.data,Z(r[0]);case 7:case"end":return e.stop()}}),e)}))),[v]),(0,N.jsx)(u.Z,{title:"Orders: Edit",children:(0,N.jsxs)(o.Z,{maxWidth:!e&&"lg",children:[(0,N.jsx)(x.Z,{heading:"Edit order",links:[{name:"Dashboard",href:c.vB.root},{name:"Orders",href:c.vB.order.list},{name:"INV-".concat(null===p||void 0===p?void 0:p.order_id)||0}]}),(0,N.jsx)(V,{isEdit:!0,currentOrder:p})]})})}}}]);
//# sourceMappingURL=9920.965d71ea.chunk.js.map