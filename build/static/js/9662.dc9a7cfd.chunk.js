"use strict";(self.webpackChunkastroscore=self.webpackChunkastroscore||[]).push([[9662],{79662:function(e,r,o){o.r(r),o.d(r,{default:function(){return L}});var n=o(47630),t=o(26445),s=o(20890),i=o(64554),a=o(23060),c=o(52989),d=o(25212),l=o(1413),u=o(15861),m=o(29439),f=o(64687),x=o.n(f),p=o(62797),h=o(98246),v=o(16871),Z=o(72791),g=o(61134),j=o(61265),w=o(53767),q=o(77196),b=o(47071),y=o(63466),C=o(13400),P=o(39709),S=o(38072),k=o(53026),_=o(77353),E=o(80184);function D(){var e=(0,v.s0)(),r=(0,h.Ds)().enqueueSnackbar,o=(0,Z.useState)(!1),n=(0,m.Z)(o,2),t=n[0],s=n[1],i=sessionStorage.getItem("email-recovery"),a=p.Ry().shape({code1:p.Z_().required("Code is required"),code2:p.Z_().required("Code is required"),code3:p.Z_().required("Code is required"),code4:p.Z_().required("Code is required"),code5:p.Z_().required("Code is required"),code6:p.Z_().required("Code is required"),email:p.Z_().email("Email must be a valid email address").required("Email is required"),password:p.Z_().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:p.Z_().required("Confirm password is required").oneOf([p.iH("password"),null],"Passwords must match")}),c={code1:"",code2:"",code3:"",code4:"",code5:"",code6:"",email:i||"",password:"",confirmPassword:""},d=(0,g.cI)({mode:"all",resolver:(0,j.X)(a),defaultValues:c}),f=d.control,D=d.setValue,A=d.handleSubmit,I=d.formState,L=I.isSubmitting,N=I.errors;(0,Z.useEffect)((function(){var e=document.querySelector("input.field-code");return null===e||void 0===e||e.addEventListener("paste",R),function(){null===e||void 0===e||e.removeEventListener("paste",R)}}),[]);var R=function(e){var r=e.clipboardData.getData("text");r=r.split(""),[].forEach.call(document.querySelectorAll(".field-code"),(function(e,o){e.value=r[o];var n="code".concat(o+1);D(n,r[o])})),e.preventDefault()},V=function(){var o=(0,u.Z)(x().mark((function o(n){return x().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,new Promise((function(e){return setTimeout(e,500)}));case 3:console.log("data:",{email:n.email,code:"".concat(n.code1).concat(n.code2).concat(n.code3).concat(n.code4).concat(n.code5).concat(n.code6),password:n.password}),sessionStorage.removeItem("email-recovery"),r("Change password success!"),e(S.vB.root,{replace:!0}),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),console.error(o.t0);case 12:case"end":return o.stop()}}),o,null,[[0,9]])})));return function(e){return o.apply(this,arguments)}}();return(0,E.jsx)(_.RV,{methods:d,onSubmit:A(V),children:(0,E.jsxs)(w.Z,{spacing:3,children:[(0,E.jsx)(_.au,{name:"email",label:"Email",disabled:!!i}),(0,E.jsx)(w.Z,{direction:"row",spacing:2,justifyContent:"center",children:["code1","code2","code3","code4","code5","code6"].map((function(e,r){return(0,E.jsx)(g.Qr,{name:"code".concat(r+1),control:f,render:function(e){var o=e.field,n=e.fieldState.error;return(0,E.jsx)(q.Z,(0,l.Z)((0,l.Z)({},o),{},{error:!!n,autoFocus:0===r,placeholder:"-",onChange:function(e){return function(e,r){var o=e.target,n=o.maxLength,t=o.value,s=o.name.replace("code",""),i=Number(s);if(t.length>=n&&i<6){var a=document.querySelector("input[name=code".concat(i+1,"]"));null!==a&&a.focus()}r(e)}(e,o.onChange)},inputProps:{className:"field-code",maxLength:1,sx:{p:0,textAlign:"center",width:{xs:36,sm:56},height:{xs:36,sm:56}}}}))}},e)}))}),(!!N.code1||!!N.code2||!!N.code3||!!N.code4||!!N.code5||!!N.code6)&&(0,E.jsx)(b.Z,{error:!0,sx:{px:2},children:"Code is required"}),(0,E.jsx)(_.au,{name:"password",label:"Password",type:t?"text":"password",InputProps:{endAdornment:(0,E.jsx)(y.Z,{position:"end",children:(0,E.jsx)(C.Z,{onClick:function(){return s(!t)},edge:"end",children:(0,E.jsx)(k.Z,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(_.au,{name:"confirmPassword",label:"Confirm New Password",type:t?"text":"password",InputProps:{endAdornment:(0,E.jsx)(y.Z,{position:"end",children:(0,E.jsx)(C.Z,{onClick:function(){return s(!t)},edge:"end",children:(0,E.jsx)(k.Z,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}}),(0,E.jsx)(P.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:L,sx:{mt:3},children:"Change password"})]})})}var A=o(38455),I=(0,n.ZP)("div")((function(e){return{maxWidth:480,margin:"auto",minHeight:"100vh",display:"flex",justifyContent:"center",flexDirection:"column",padding:e.theme.spacing(12,0)}}));function L(){return(0,E.jsxs)(d.Z,{title:"New Password",children:[(0,E.jsx)(c.Z,{}),(0,E.jsx)(t.Z,{children:(0,E.jsxs)(I,{sx:{textAlign:"center"},children:[(0,E.jsx)(A.Jg,{sx:{mb:5,mx:"auto",height:120}}),(0,E.jsx)(s.Z,{variant:"h3",gutterBottom:!0,children:"Request sent successfully!"}),(0,E.jsxs)(s.Z,{sx:{color:"text.secondary"},children:["We've sent a 6-digit confirmation email to your email.",(0,E.jsx)("br",{}),"Please enter the code in below box to verify your email."]}),(0,E.jsx)(i.Z,{sx:{mt:5,mb:3},children:(0,E.jsx)(D,{})}),(0,E.jsxs)(s.Z,{variant:"body2",children:["Don\u2019t have a code? \xa0",(0,E.jsx)(a.Z,{variant:"subtitle2",onClick:function(){},children:"Resend code"})]})]})})]})}}}]);
//# sourceMappingURL=9662.dc9a7cfd.chunk.js.map